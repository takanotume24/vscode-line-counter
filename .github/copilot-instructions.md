全体ルール（全ての言語）

- 関数型プログラミングスタイルで実装する。

TypeScript 固有ルール

実装

- 明示的な型注釈を徹底する。すべての関数の引数と戻り値に型を付け、`any` の使用は原則禁止とする。やむを得ず `any` を使う場合は理由をコメントで残す。
- プロジェクトの `tsconfig.json` で `strict: true` と `noImplicitAny` を有効にすることを推奨する。
- 不変性を優先する（可能な限り `readonly` を使う）。配列やオブジェクトの変換は `map` / `filter` / `reduce` 等の関数型操作で行う。
- 関数はトップレベルで定義し、不要なネスト関数は作らない。高階関数や純関数は許可するが、副作用は最小限にする。
- デフォルト引数を避ける。代替としてオプションを持つパラメータオブジェクト（named params）や `Partial<T>` を使う。関数呼び出しは可能な限りオブジェクト引数で行い、引数順への依存を減らす（例: `func({ a, b })`）。
- 非同期処理は `async/await` を使い、Promise を返す関数は明確に型注釈をつける。例外は `try/catch` で扱うか、呼び出し側へ伝播させる。
- モジュールは名前付きエクスポート（named exports）を使う。デフォルトエクスポートは原則禁止する。
- 公開 API（関数やオブジェクト）には `interface` / `type` を明確に定義する。複雑なオブジェクトにはドメイン型を用いる。
- DOM / Node API を扱う場合は nullable チェック（`?.` / `??` / 型ガード）を必ず行う。
- 外部ライブラリを使用する際は型定義（@types/\*）が存在することを確認し、必要に応じて最小限のラッパー型を作る。

リンターと設定

- ESLint + TypeScript プラグインを準拠する。主なルールとして `no-explicit-any` 相当、`prefer-readonly`、`@typescript-eslint/explicit-module-boundary-types` を推奨する。

テスト

- テストフレームワークはプロジェクト既存の設定に従う。このリポジトリでは Mocha を使っているため、Mocha + Chai（またはプロジェクトが採用しているもの）で書くことを推奨する。
- テストは TypeScript で記述し、型注釈を付与する。
- 各テストにコメントで「入力値」と「期待値」を具体的に明記する。
- 網羅的なテストを書く（正常系＋代表的な境界/異常系）。
- テスト内で被テスト関数の出力を使って期待値を生成してはいけない（期待値は独立して定義する）。
- 必要に応じて `sinon` や `ts-mockito` などでモックを使う。テスト時は副作用を持たないように注意する。

注意事項

- このファイルはコピペや自動生成のベースになるため、簡潔で読みやすく保つ。
- ファイルを編集する際は、実際の実装や周辺のコメント・docstring と矛盾がないように必ず同時に更新する。
- 変更が API レベルのもの（型や公開関数）であれば、README やリリースノートに互換性の注意を明記する。

その他

- 小さい変更でも型とテストが通ることを確認してからマージする。CI が無ければローカルで TypeScript コンパイルとテスト実行を行う。
